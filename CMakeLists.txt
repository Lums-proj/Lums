cmake_minimum_required(VERSION 3.0)
set(CMAKE_MODULE_PATH ${CMAKE_MODULE_PATH} "${CMAKE_SOURCE_DIR}/cmake")

project(Lums)
set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -std=c++11")
find_package(OpenGL)
find_package(SDL2 REQUIRED)
find_package(SDL2_image REQUIRED)
file(GLOB SRC "src/*.cpp")
file(GLOB HEADER "include/Lums/*.h")
if (APPLE)
    set(SRC ${SRC} "src/OperatingSystem/MacOSX.mm")
endif ()
include_directories("include")
include_directories(${SDL2_INCLUDE} SYSTEM)
add_library(Lums SHARED ${SRC} ${HEADER})
add_library(Lums_static STATIC ${SRC} ${HEADER})
set_target_properties(Lums_static PROPERTIES OUTPUT_NAME Lums)
if (APPLE)
    add_library(Lums_framework SHARED ${SRC} ${HEADER})
    set_target_properties(Lums_framework PROPERTIES OUTPUT_NAME Lums FRAMEWORK ON PUBLIC_HEADER "${HEADER}")
    target_link_libraries(Lums_framework ${OPENGL_gl_LIBRARY} ${SDL2_LIBRARY} ${SDLIMAGE_LIBRARY})
    install(TARGETS Lums_framework DESTINATION Library/Frameworks)
endif ()
target_link_libraries(Lums ${OPENGL_gl_LIBRARY} ${SDL2_LIBRARY} ${SDLIMAGE_LIBRARY})
install(TARGETS Lums DESTINATION lib)
install(TARGETS Lums_static DESTINATION lib)
install(DIRECTORY include/Lums DESTINATION include)
